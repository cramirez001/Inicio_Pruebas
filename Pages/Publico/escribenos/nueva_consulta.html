<!DOCTYPE html>
<html lang="en">

<head>
   <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <link rel="stylesheet" href="../../../Assets/Globals/css/cpl-Styles.css">
   <link rel="stylesheet" href="../../../Assets/Customs/Publico/Formulario/css/custom.css">
   <title>Document</title>
   <script src="../../../Assets/Globals/js/jquery.js"></script>
</head>

<body>
   <div class="cpl_body page_formulario">
      <div class="cpl_container padding_top_medium">
         <div class="flex_row">
            <div class="cpl_col cpl_sidebar" style="z-index: 2;">
               <ul class="menu_lateral">
                  <a class="active" href="./nueva_consulta.html">
                     <li>Escríbenos</li>
                  </a>
                  <a href="./solicitudes-reclamos(inicio).html">
                     <li>Estado de reclamos o consultas</li>
                  </a>
               </ul>
            </div>
            <div class="cpl_col cpl_bodybar ">
               <div class="flex_row">
                  <div class="cpl_col cpl_col_12 step step_1">
                     <div class="flex_row option_zone ">
                        <div class="cpl_col cpl_col_12">
                           <h1 class="center_text ld_margin_bottom_medium xld_margin_bottom_medium">Formulario
                              de contacto
                           </h1>
                           <div class="cpl_col cpl_col_12">
                              <div class="tab_buttons max_w_400">
                                 <a class="active">Afiliado</a>
                                 <a href="./empleador.html">Empleador</a>

                              </div>
                           </div>
                           <h3 class="sd_center_text md_center_text">Selecciona el motivo de contacto</h3>
                        </div>
                        <div class="cpl_col cpl_col_12 d-flex wrap wrap_cajas">
                           <label class="cpl_input_radio caja">
                              <div class="circulo-padding">
                                 <input id="1" class="radio_tipoSolicitud" type="radio" name="radio_tipoSolicitud"
                                    value="consulta" /><span class="check"></span>
                              </div>
                              <div class="cont">
                                 <h3 class="p-sin title">
                                    Consulta
                                 </h3>
                                 <p>
                                    Solicitud de información o consulta de estado de avance de algún trámite
                                 </p>
                                 <div class="cpl_flex_form margin_top_medium detalle_de_solicitud detalleConsulta">
                                    <div class="flex_row">
                                       <div class="cpl_col cpl_col_12 max_w_350 input_wrap">
                                          <label for=""><span>Detalle de solicitud</span></label>
                                          <select name="" id="" class="cpl_input">
                                             <option value="">
                                                Seleccionar
                                             </option>
                                          </select>
                                          <span class="f_error">Debes seleccionar el detalle</span>
                                       </div>
                                    </div>
                                 </div>
                              </div>
                           </label>
                           <label class="cpl_input_radio caja">
                              <div class="circulo-padding">
                                 <input id="1" class="radio_tipoSolicitud" type="radio" name="radio_tipoSolicitud"
                                    value="reclamo" /><span class="check"></span>
                              </div>
                              <div class="cont">
                                 <h3 class="p-sin title">
                                    Reclamo
                                 </h3>
                                 <p>
                                    Queja por mala atención, por transacción no resuelta o malestar por
                                    alguna determinada situación.
                                 </p>
                                 <div class="cpl_flex_form margin_top_medium detalle_de_solicitud detalleReclamo">
                                    <div class="flex_row">
                                       <div class="cpl_col cpl_col_12 max_w_350 input_wrap ">
                                          <label for=""><span>Detalle del reclamo</span></label>
                                          <select name="" id="" class="cpl_input">
                                             <option value="">
                                                Seleccionar
                                             </option>
                                          </select>
                                          <span class="f_error">Debes seleccionar el detalle</span>
                                       </div>
                                    </div>
                                 </div>
                              </div>
                           </label>
                           <label class="cpl_input_radio caja">
                              <div class="circulo-padding">
                                 <input id="1" class="radio_tipoSolicitud" type="radio" name="radio_tipoSolicitud"
                                    value="tramite" /><span class="check"></span>
                              </div>
                              <div class="cont">
                                 <h3 class="p-sin title">
                                    Inicio de trámite
                                 </h3>
                                 <p>
                                    Solicitud de contacto de un ejecutivo para realizar el ingreso de su
                                    trámite de pensión, de retiro de fondos (extranjeros), de pagos en
                                    exceso, entre otros.
                                 </p>
                                 <div class="cpl_flex_form margin_top_medium detalle_de_solicitud detalleTramite">
                                    <div class="flex_row">
                                       <div class="cpl_col cpl_col_12 max_w_350 input_wrap">
                                          <label for=""><span>Trámite que deseas iniciar</span></label>
                                          <select name="" id="" class="cpl_input">
                                             <option value="">
                                                Seleccionar
                                             </option>

                                             <option value="1">
                                                Opcion 1
                                             </option>

                                             <option value="2">
                                                Opcion 2
                                             </option>

                                             <option value="3">
                                                Opcion 3
                                             </option>
                                          </select>
                                          <span class="f_error">Debes seleccionar un trámite</span>
                                       </div>
                                    </div>
                                 </div>
                              </div>
                           </label>
                        </div>
                        <div class="cpl_col cpl_col_12">
                           <!-- <div class="f_error">Debes seleccionar una opción</div> -->
                        </div>
                        <div class="cpl_col cpl_col_12 margin_top_small">
                           <a onclick="nextAndPrev('next', 'step_2')" class="cpl_btn max_w_200 center_div aqua">
                              Siguiente
                           </a>
                        </div>
                     </div>
                  </div>
                  <div class="cpl_col cpl_col_12 step step_2">
                     <div class="cpl_flex_form">
                        <div class="flex_row">
                           <div class="cpl_col cpl_col_12 margin_bottom_small">
                              <h3 class="center_text">Ingresa tus datos para que podamos responder a tu
                                 solicitud
                              </h3>
                           </div>
                           <div class="cpl_col cpl_col_6 input_wrap">
                              <label><span>Nombre </span></label>
                              <input type="text" class="cpl_input">
                              <span class="f_error">Debes completar este campo</span>
                           </div>
                           <div class="cpl_col cpl_col_6 input_wrap">
                              <label><span>Apellido Paterno </span></label>
                              <input type="text" class="cpl_input">
                              <span class="f_error">Debes completar este campo</span>
                           </div>
                           <div class="cpl_col cpl_col_6 input_wrap">
                              <label><span>Apellido Materno </span></label>
                              <input type="text" class="cpl_input">
                              <span class="f_error">Debes completar este campo</span>
                           </div>
                           <div class="cpl_col cpl_col_6 input_wrap">
                              <label><span>Rut</span></label>
                              <input type="text" class="cpl_input">
                              <span class="f_error">Debes completar este campo</span>
                           </div>
                           <div class="cpl_col cpl_col_6 input_wrap telMovil">
                              <label><span>Teléfono móvil</span></label>
                              <input type="text" class="cpl_input">
                              <span class="f_error">Debes completar este campo</span>
                           </div>
                           <div class="cpl_col cpl_col_6 input_wrap telFijo">
                              <label><span>Teléfono fijo (opcional)</span></label>
                              <input type="text" class="cpl_input">
                              <span class="f_error">Debes completar este campo</span>
                           </div>
                           <div class="cpl_col cpl_col_6 input_wrap">
                              <label><span>Mail</span></label>
                              <input type="text" class="cpl_input">
                              <span class="f_error">Debes completar este campo</span>
                           </div>
                           <div class="cpl_col cpl_col_6 input_wrap">
                              <label><span>Repetir Mail</span></label>
                              <input type="text" class="cpl_input">
                              <span class="f_error">Debes completar este campo</span>
                           </div>
                        </div>
                        <div class="flex_row center_div max_w_400 margin_top_small">
                           <div class="cpl_col sd_cpl_col_6 md_cpl_col_6 ld_cpl_col_6 xld_cpl_col_6">
                              <a onclick="nextAndPrev('prev', 'step_1')"
                                 class="cpl_btn max_w_200 center_div  secondary aqua">
                                 Atrás
                              </a>
                           </div>
                           <div class="cpl_col sd_cpl_col_6 md_cpl_col_6 ld_cpl_col_6 xld_cpl_col_6">
                              <a onclick="nextAndPrev('next', 'step_3')" class="cpl_btn max_w_200 center_div  aqua ">
                                 Siguiente
                              </a>
                           </div>
                        </div>
                     </div>
                  </div>
                  <div class="cpl_col cpl_col_12 step step_3 cpl_flex_form">
                     <div class="flex_row">
                        <div class="cpl_col cpl_col_12">
                           <h3 class="t-extraDarkGray">Escribe aquí tu reclamo</h3>
                           <p>Por favor incorpora la mayor cantidad de antecedentes para poder
                              resolver su solicitud. Ejemplo: Fechas involucradas, producto, tramite, etc
                           </p>
                        </div>
                        <div class="cpl_col cpl_col_12 input_wrap textarea_wrap  ">

                           <textarea name="ctl00$ctl48$g_9b4b1bec_818d_4414_95da_b9a62ed87d88$txtMensaje" cols="30"
                              rows="10" id="ctl00_ctl48_g_9b4b1bec_818d_4414_95da_b9a62ed87d88_txtMensaje"
                              class="cpl_input textarea-generico txtMensaje margin_top_small"
                              placeholder="Máximo 1000 caracteres"></textarea>
                           <div class="f_error">Debes escribir un mensaje</div>
                        </div>
                        <div class="cpl_col cpl_col_12 margin_bottom_small">
                           <div class="cpl_accordion arrow_controler accordion_form_file">
                              <div class="accordion_item b-white">
                                 <span></span>
                                 <h4 class="center_text file_title"><strong>Adjuntar documentacion</strong>
                                    (opcional)
                                 </h4>
                                 <div class="accordion_arrow_icon"></div>
                                 <div class="accordion_content">
                                    <div id="dropzone" class="dropzone"></div>
                                    <p class="center_text margin_top_small">
                                       Solo se admiten archivos <strong>PDF, WORD, JPG, PNG.</strong>
                                       <br>
                                       Además, la suma total de los archivos adjuntos no debe superar los <strong>10
                                          MB</strong>
                                    </p>
                                 </div>
                              </div>
                           </div>
                        </div>
                        <!-- recaptcha -->
                        <div class="cpl_col cpl_col_12 center_div max_w_300 margin_top_small margin_bottom_small">
                           <div><iframe title="reCAPTCHA"
                                 src="https://www.google.com/recaptcha/api2/anchor?ar=1&amp;k=6LcMEDkUAAAAANSFrzgMNs6a66LgOWQilbS0KdDh&amp;co=aHR0cHM6Ly93d3cuYWZwY2FwaXRhbC5jbDo0NDM.&amp;hl=es-419&amp;v=FDTCuNjXhn1sV0lk31aK53uB&amp;theme=light&amp;size=normal&amp;cb=l8zpa0tc53rx"
                                 width="304" height="78" role="presentation" name="a-d51ctafpukr" frameborder="0"
                                 scrolling="no"
                                 sandbox="allow-forms allow-popups allow-same-origin allow-scripts allow-top-navigation allow-modals allow-popups-to-escape-sandbox"></iframe>
                           </div>
                        </div>
                        <!-- recaptcha -->
                        <div class="cpl_col cpl_col_12 margin_bottom_medium margin_top_small">
                           <div class="flex_row center_div max_w_400">
                              <div class="cpl_col sd_cpl_col_6 md_cpl_col_6 ld_cpl_col_6 xld_cpl_col_6">
                                 <a onclick="nextAndPrev('prev', 'step_2')"
                                    class="cpl_btn max_w_200 center_div  secondary aqua">
                                    Atrás</a>
                              </div>
                              <div class="cpl_col sd_cpl_col_6 md_cpl_col_6 ld_cpl_col_6 xld_cpl_col_6">
                                 <a href="./enviado.html" id="button_send"
                                    class="cpl_btn max_w_200 center_div btn_one_click">
                                    Enviar</a>
                              </div>
                           </div>
                        </div>
                     </div>
                  </div>
               </div>
            </div>
         </div>
      </div>
   </div>
   <div id="preview-template" style="display: none;">
      <div class="dz-preview dz-file-preview">
         <div class="dz-details">
            <div class="dz-image"><img data-dz-thumbnail /></div>
            <div class="dz-filename"><span data-dz-name></span></div>
            <div class="dz-size" data-dz-size></div>
         </div>
         <div class="dz-progress"><span class="dz-upload" data-dz-uploadprogress></span></div>
         <div class="dz-success-mark"></div>
         <div class="dz-error-mark"></div>
         <div class="dz-error-message"><span data-dz-errormessage></span></div>
      </div>
   </div>
   <!-- scripts -->
   <script src="../../../Assets/Globals/js/globals.js"></script>
   <script src="../../../Assets/Globals/js/accordion.js"></script>
   <script src="../../../Assets/Globals/js/dropzone.js"></script>
   <script src="../../../Assets/Globals/js/nextAndPrev.js"></script>
   <script src="../../../Assets/Globals/js/modal.js"></script>
   <!-- Configuración del dropzone (jquery) -->
   <script>
      Dropzone.autoDiscover = false;
      $(document).ready(function () {

         var zdrop = new Dropzone('#dropzone', {
            url: 'https://httpbin.org/post',
            autoProcessQueue: false,
            previewTemplate: document.getElementById('preview-template').innerHTML,
            dictDefaultMessage: `
         <h3 class="t-extraDarkGray">Arrastra tus archivos archivos aquí</h3>
         <a >
         o selecciona tus archivos aquí
         </a>
         `,
            maxFilesize: 10,
            addRemoveLinks: true,
            dictRemoveFile: 'Quitar',
            dictCancelUpload: 'Cancelar',
            dictCancelUploadConfirmation: '¿Quieres cancelar la carga?',

            // removeFilePromise: function() {
            //   return new Promise( (resolve, reject) => {
            //     let rand = Math.floor(Math.random() * 3)
            //     console.log(rand);
            //     if (rand == 0) reject('didnt remove properly');
            //     if (rand > 0) resolve();
            //   });
            // }

         });


         $('#button_send').click(function () {
            myDropzone.processQueue();
         });
      });
   </script>
   <!-- mostrar select detalle segun tipo de solicitud -->
   <script>
      $('input[type=radio][name=radio_tipoSolicitud]').change(function () {
         $('.detalle_de_solicitud').hide();
         switch (this.value) {
            case 'consulta':

               $('.detalleConsulta').show();
               $('html, body').animate({
                  scrollTop: $(this).offset().top
               }, 200);
               break;

            case 'reclamo':

               $('.detalleReclamo').show();
               $('html, body').animate({
                  scrollTop: $(this).offset().top
               }, 200);

               break;

            case 'tramite':

               $('.detalleTramite').show();
               $('html, body').animate({
                  scrollTop: $(this).offset().top
               }, 200);

               break;

         }

      });
   </script>

   <!-- leer si por url viene una opción preseleccionada -->
   <script>




      function obtenerValorParametro() {



         var cajaConsulta = document.querySelector('.cpl_input_radio:nth-child(1)');

         var cajaReclamo = document.querySelector('.cpl_input_radio:nth-child(2)');

         var cajaTramite = document.querySelector('.cpl_input_radio:nth-child(3)');

         var step1 = document.getElementsByClassName('step_1')[0];
         var col = step1.querySelector('.cpl_col_12');

         var tabButtons = col.querySelector('.tab_buttons');

         var titleSelecciona = col.querySelector('h3.sd_center_text');





         var sPaginaURL = window.location.search.substring(1);
         var sURLVariables = sPaginaURL.split('&');

         var sParametro = sURLVariables[0].split('=');

         if (sParametro[0] == 'type') {

            cajaConsulta.style.display = 'none';
            cajaReclamo.style.display = 'none';
            cajaTramite.style.display = 'none';
            titleSelecciona.style.display = 'none';
            tabButtons.style.display = 'none';




            switch (sParametro[1]) {

               case 'consulta': cajaConsulta.click();

                  break;


               case 'reclamo': cajaReclamo.click();


                  break;


               case 'tramite': cajaTramite.click();

                  cajaTramite.style.display = 'flex';

                  if (sURLVariables.length > 1) {

                     var sParametro2 = sURLVariables[1].split('=');
                     if (sParametro2[0] == 'detail') {
                        //valor de segunda variable
                        var param2 = sURLVariables[1].split('=');
                        var tipoSolicitud = param2[1];
                        //
                        var selector = cajaTramite.querySelector('select');

                        var opts = selector.options;

                        for (i = 0; i < opts.length; i++) {



                           if (opts[i].value == tipoSolicitud) {

                              selector.selectedIndex = opts[i].value;
                           }
                        }
                     } else {

                     }

                  }


                  break;


            }

         }
         else {

         }



      };


      obtenerValorParametro();


   </script>












   <script>

var tabButtons = $('.tab_buttons');

var titleSelecciona = $('h3.sd_center_text');

      var cajaConsulta = $('.cpl_input_radio:nth-child(2)');

      var cajaReclamo = $('.cpl_input_radio:nth-child(3)');

      var cajaTramite = $('.cpl_input_radio:nth-child(4)');


      function obtenerValorParametro() {

         var sPaginaURL = window.location.search.substring(1);
         var sURLVariables = sPaginaURL.split('&');

         var sParametro = sURLVariables[0].split('=');

         if (sParametro[0] == 'type') {

            cajaConsulta.css('display', 'none');
            cajaReclamo.css('display', 'none');
            cajaTramite.css('display', 'none');
            titleSelecciona.css('display', 'none');
            tabButtons.css('display', 'none');




            switch (sParametro[1]) {

               case 'consulta':

                  cajaConsulta.find('input').prop("checked", false);
                  cajaConsulta.find('.cpl_flex_form').css('display', 'block');
                  
                  cajaConsulta.addClass('ACTIVO');
                  cajaConsulta.css('display', 'flex');
                  if (sURLVariables.length > 1) {
                     var sParametro2 = sURLVariables[1].split('=');
                     if (sParametro2[0] == 'detail') {
                        //valor de segunda variable
                        var param2 = sURLVariables[1].split('=');
                        var tipoSolicitud = param2[1];
                        //
                        var selector = cajaConsulta.find('select');
                        var opts = selector.children('option');
                        for (i = 0; i < opts.length; i++) {
                           if (opts[i].value == tipoSolicitud) {
                              opts[i].selected = 'selected';
                           }
                        }
                     }
                     // else{}   
                  }

               
               cajaConsulta.click();   

               break;


               case 'reclamo':

                  
                  cajaReclamo.find('input').prop("checked", false);
                 
              
                  cajaReclamo.addClass('ACTIVO');
                  cajaReclamo.css('display', 'flex');
                  if (sURLVariables.length > 1) {
                     var sParametro2 = sURLVariables[1].split('=');
                     if (sParametro2[0] == 'detail') {
                        //valor de segunda variable
                        var param2 = sURLVariables[1].split('=');
                        var tipoSolicitud = param2[1];
                        //
                        var selector = cajaReclamo.find('select');
                        var opts = selector.children('option');
                        for (i = 0; i < opts.length; i++) {
                           if (opts[i].value == tipoSolicitud) {
                              opts[i].selected = 'selected';
                           }
                        }
                     }
                     // else{}   
                  }
                  

                  cajaReclamo.click();

                  alert('muestra el select')
                  cajaReclamo.find('.cpl_flex_form').show();

                  break;


               case 'tramite': 
                  

                  
                  cajaTramite.find('input').prop("checked", false);
                  cajaTramite.find('.cpl_flex_form').css('display', 'block');
                  
                  cajaTramite.addClass('ACTIVO');
                  cajaTramite.css('display', 'flex');
                  if (sURLVariables.length > 1) {
                     var sParametro2 = sURLVariables[1].split('=');
                     if (sParametro2[0] == 'detail') {
                        //valor de segunda variable
                        var param2 = sURLVariables[1].split('=');
                        var tipoSolicitud = param2[1];
                        //
                        var selector = cajaTramite.find('select');
                        var opts = selector.children('option');
                        for (i = 0; i < opts.length; i++) {
                           if (opts[i].value == tipoSolicitud) {
                              opts[i].selected = 'selected';
                           }
                        }
                     }
                     // else{}   
                  }

                  
                  cajaTramite.click();

                  break;


            }

         }
         else {

         }




      };


      $(document).ready(function () {

         obtenerValorParametro();

      });


   </script>



</body>

</html>